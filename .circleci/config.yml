version: 2.1

orbs:
  win: circleci/windows@2.4.0

jobs:
  build:
    executor:
      name: win/default
      shell: powershell.exe
    steps:
    - checkout
    - restore_cache:
        keys:
          - dotnet-packages-v1-{{ checksum "./Hassie.ConcussionEngine.Engine/Hassie.ConcussionEngine.Engine.csproj" }}
    - run:
        name: "Fetch dependencies"
        command: msbuild "Concussion Engine.sln" -t:restore
    - save_cache:
        paths:
          - C:\Users\circleci\.nuget\packages
        key: dotnet-packages-v1-{{ checksum "./Hassie.ConcussionEngine.Engine/Hassie.ConcussionEngine.Engine.csproj" }}
    - run:
        name: "Build"
        command: msbuild.exe "Concussion Engine.sln"
